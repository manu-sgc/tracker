{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avaliação do Dia</title>
    <link rel="stylesheet" href="{% static 'css/avaliacao.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="rate-header">
        <a href="{% url 'calendario' %}" class="arrow-left">
            <i class="fas fa-arrow-left"></i>
        </a>
        <h1>Rate my day</h1>
        <a href="{% url 'adulting' %}" class="arrow-right">
            <i class="fas fa-arrow-right"></i>
        </a>
    </div>
    <div class="day-grid">
        {% for day in dias_do_mes %}
            <div class="day">
                <button class="day-number" onclick="openModal({{ day }})">{{ day }}</button>
                <input type="text" class="day-input" placeholder="">
            </div>
        {% endfor %}
    </div>

    <!-- Modal -->
    <div id="starModal" class="modal">
        <div class="modal-content">
            <span onclick="closeModal()" style="cursor:pointer; font-size: 1.5rem;">&times;</span>
            <div id="stars">
                <span class="star" data-value="1">&#9733;</span>
                <span class="star" data-value="2">&#9733;</span>
                <span class="star" data-value="3">&#9733;</span>
                <span class="star" data-value="4">&#9733;</span>
                <span class="star" data-value="5">&#9733;</span>
            </div>
        </div>
    </div>

    <script>
        let currentDay = 0;

        function openModal(event, day) {
            currentDay = day;
            const modal = document.getElementById("starModal");

            modal.style.display = "block";
            const stars = document.querySelectorAll('.star');
            stars.forEach(star => {
                star.classList.remove('selected'); // Limpa a seleção anterior
                star.onclick = function() {
                    const value = this.getAttribute('data-value');
                    stars.forEach(s => s.classList.remove('selected')); // Limpa a seleção
                    for (let i = 0; i < value; i++) {
                        stars[i].classList.add('selected'); // Adiciona classe de seleção
                    }
                    closeModal();
                };
            });
        }

        function closeModal() {
            document.getElementById("starModal").style.display = "none"; // Fecha o modal
        }
    </script>
</body>
</html>